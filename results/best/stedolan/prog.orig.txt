```c
// Refactored code with clear comments
#include <stdio.h>

// Function to generate and print the pattern
void generate_pattern(long pattern_value) {
    long z = 0;
    long x;

    // Print header for P1 format
    puts("P1\n80 80");

    // Loop to generate the pattern
    while (3 - z / 2160) {
        x = ++z % 81 / 8 - 5;
        
        // Conditional logic to determine character to print
        if (5 > x) {
            putchar(!(16 >> (x ^ -(x < 1)) + 1 & pattern_value << 5 >> z / 648 * 5) ^ 49);
        } else {
            putchar(10); // Newline character
        }
    }
}

int main() {
    long pattern_value;

    // Read pattern value from input
    if (scanf("%10lx", &pattern_value) != 1) {
        fprintf(stderr, "Error: Invalid input.\n");
        return 1;
    }

    // Generate and print the pattern
    generate_pattern(pattern_value);

    return 0;
}
```